<?xml version="1.0" encoding="UTF-8"?><record_update table="sp_widget">
    <sp_widget action="INSERT_OR_UPDATE">
        <category>custom</category>
        <client_script><![CDATA[api.controller = function() {
    var c = this;
   
};
]]></client_script>
        <controller_as>c</controller_as>
        <css>/* Global reset */
* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

h1 {
  text-align: center;
  font-weight: bold;
  /* padding-bottom: 10px;  Adjusted padding */
  margin-top: 10px; /* Moved title up */
  color: #3d52a0; /* Text color */
}

body {
  font-family: "Montserrat", "Arial", sans-serif;
  background-color: #eee;
  padding: 0px;
  color: white; /* Text color */
}

.row-nav {
  margin-bottom: 20px;
}

.row-book {
  border-radius: 10px;
  padding: 40px 30px;
  background-color: #7091e6;
  margin-bottom: 20px;
  text-align: left; /* Align text to the left */
}

.img-responsive {
  margin: 0 auto;
  max-height: 300px;
  width: 100%;
  height: auto;
}

.bg-danger {
  color: red;
  text-align: center;
  font-size: 2rem;
  margin-top: 10px;
}

.bg-success {
  color: green;
  text-align: center;
}

.card-title {
  font-size: 2.5rem;
  margin-bottom: 10px;
}

.card-text {
  font-size: 2rem;
  margin-bottom: 5px;
}

.book-cover {
  width: 100%;
  height: auto;
  border-radius: 10px;
}

@media (max-width: 768px) {
  .card {
    flex-direction: column;
    margin-left: 0;
    margin-right: 0;
  }

  .col-md-4, .col-md-8 {
    width: 100%;
  }

  .book-cover {
    border-radius: 10px 10px 10px 10px;
  }
}

.container-fluid {
  padding-left: 20px;
  padding-right: 20px;
}

.row-body {
  display: flex;
  justify-content: flex-start; /* Align cards to the left */
  margin-top: 20px;
}

.row-book {
  display: flex;
  justify-content: flex-start; /* Align cards to the left */
  align-items: center; 
}

.book-info {
  margin-left: 30px; /* Adjusted left margin */
}

.book-info h2{
  text-align: center;
   margin-bottom: 10px;
  color: white;
}

.book-info h3 {
  text-align: right; /* Moved to the right */
  padding-bottom: 20px;
  
  color: white;
}

.book-info h4, .book-info p {
  margin-left: 10px;
  color: white; /* Text color */
}

.book-info p{
  color: red;
}  

.book-info .bg-danger {
  font-size: 2rem;
}

.book-info button {
  margin-top: 10px;
  font-size: 2rem; /* Same size as days late */
}</css>
        <data_table>sp_instance</data_table>
        <demo_data/>
        <description/>
        <docs/>
        <field_list/>
        <has_preview>true</has_preview>
        <id>borrowed_books</id>
        <internal>false</internal>
        <link><![CDATA[function link(scope, element, attrs, controller) {  }]]></link>
        <name>Borrowed Books</name>
        <option_schema/>
        <public>false</public>
        <roles/>
        <script><![CDATA[(function() {
    // Create an instance of the Script Include
    var borrowedBooksUtils = new BorrowedBooksUtils();

    // Call the getBorrowedBooks method
    var borrowedBooks = borrowedBooksUtils.getBorrowedBooks();
	
    data.borrowedBooks = borrowedBooks;
})();
]]></script>
        <servicenow>false</servicenow>
        <sys_class_name>sp_widget</sys_class_name>
        <sys_created_by>harini.srija</sys_created_by>
        <sys_created_on>2024-06-04 08:27:35</sys_created_on>
        <sys_id>232fd7c693ee8210ef267c5efaba1049</sys_id>
        <sys_mod_count>173</sys_mod_count>
        <sys_name>Borrowed Books</sys_name>
        <sys_package display_value="BookQuest" source="x_1383151_bkquest">327b26db93250210ef267c5efaba100f</sys_package>
        <sys_policy/>
        <sys_scope display_value="BookQuest">327b26db93250210ef267c5efaba100f</sys_scope>
        <sys_update_name>sp_widget_232fd7c693ee8210ef267c5efaba1049</sys_update_name>
        <sys_updated_by>harini.srija</sys_updated_by>
        <sys_updated_on>2024-06-25 04:26:20</sys_updated_on>
        <template><![CDATA[<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Borrowed Books</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body ng-controller="myController">
  <div class="container-fluid">
    <div class="row row-body">
      <div class="col-md-2 col-sm-2 col-xs-2"></div>
      <div class="col-md-8 col-sm-8 col-xs-8">
        <div class="row row-nav">
          <h1>My Books</h1>
        </div>
        
        <!-- AngularJS ng-repeat loop to display borrowed books -->
        <div class="row row-book" ng-repeat="book in c.data.borrowedBooks">
          <div class="col-md-4 col-sm-5 col-xs-12 book-image">
            <img ng-src="{{book.coverImage}}" alt="{{book.title}} cover" class="img-responsive">
          </div>
          <div class="col-md-8 col-sm-7 col-xs-12 book-info">
            <h2><strong>{{book.title}}</strong></h2>
            <h3>Author: {{book.author}}</h3>
            <h4>Borrow ID: {{book.borrowId}}</h4>
            <h4>Date Borrowed: {{book.borrowDate}}</h4>
            <h4>Date Returned: {{book.returnedDate || 'Not returned'}}</h4>
            <!-- Conditional display based on returned status -->
            <p class="bg-danger" ng-if="book.returnedDate && isLate(book.returnedDate, book.dueDate)">
              <strong>Days Late: {{calculateDaysLate(book.returnedDate, book.dueDate)}}</strong>
            </p>
            <p class="bg-success" ng-if="book.returnedDate && isLate(book.returnedDate, book.dueDate)">
              <strong>Returned on time</strong>
            </p>
            <!-- Conditional button based on returned status -->
            <p class="bg-danger" ng-if="book.daysLate > 0"><strong>Days Late: {{book.daysLate}}</strong></p>
            <button type="submit" class="btn btn-danger col-md-12 col-sm-12 col-xs-12" ng-if="!book.returnedDate && isLate(book.returnedDate, book.dueDate)">Overdue Book</button>
            <button type="submit" class="btn btn-success col-md-12 col-sm-12 col-xs-12" ng-if="book.returnedDate && !isLate(book.returnedDate, book.dueDate)">Returned</button>
            <button type="submit" class="btn btn-danger col-md-12 col-sm-12 col-xs-12" ng-if="!book.returnedDate">Overdue Book</button> 
          </div>
        </div>
      </div>
    </div>
  </div>]]></template>
    </sp_widget>
</record_update>
